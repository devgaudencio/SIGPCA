<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Contratações Públicas</title>
    <link rel="stylesheet" href="home.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Firebase compat scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDBt9_pG-9uNyMEeMq4UnRDV7EjQSjV_o0",
        authDomain: "sigpca-afac4.firebaseapp.com",
        projectId: "sigpca-afac4",
        storageBucket: "sigpca-afac4.appspot.com",
        messagingSenderId: "528402082133",
        appId: "1:528402082133:web:a3f9691545858de44b67dc",
        measurementId: "G-8RC4CP7RZ2"
      };
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();
    </script>
</head>
<body>
    <div id="login-bg-anim">
        <canvas id="loginParticles"></canvas>
    </div>
    <div id="login" class="login-container">
        <div class="login-content">
            <h1 class="login-title">SIGPCA</h1>
            <p class="login-subtitle">Sistema Integrado de Gestão de Contratações Públicas</p>
            <div id="gSignInWrapper">
                <button id="loginGoogleBtn" class="btn-primary" style="width:100%;font-size:1.1rem;display:flex;align-items:center;justify-content:center;gap:0.5rem;">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="" style="width:22px;height:22px;">
                    Entrar com Google
                </button>
            </div>
            <form id="loginEmailForm" style="width:100%;margin-top:1.2rem;display:flex;flex-direction:column;gap:0.7rem;">
                <input type="email" id="loginEmail" placeholder="E-mail" required style="padding:0.7rem 1rem;border-radius:8px;border:1.5px solid #e9ecef;font-size:1rem;">
                <input type="password" id="loginSenha" placeholder="Senha" required style="padding:0.7rem 1rem;border-radius:8px;border:1.5px solid #e9ecef;font-size:1rem;">
                <button type="submit" class="btn-primary" style="width:100%;font-size:1.1rem;display:flex;align-items:center;justify-content:center;">Entrar</button>
            </form>
            <div class="login-register-text">
                Não tem uma conta? <a href="https://www.instagram.com/gaudencio.dev/" target="_blank" class="register-link">Cadastrar</a>
            </div>
            <div id="loginError" style="color: #e74c3c; margin-top: 1rem;"></div>
        </div>
    </div>
    <div id="app" style="display:none;">
        <div class="container">
            <!-- Menu Lateral -->
            <nav class="sidebar">
                <div class="sidebar-header">
                    <h2><i class="fas fa-building"></i> SIGPCA</h2>
                    <p>Sistema de Contratações</p>
                </div>
                
                <ul class="sidebar-menu">
                    <li class="menu-item active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </li>
                    <li class="menu-item" data-section="cadastro">
                        <i class="fas fa-plus-circle"></i>
                        <span>Cadastro</span>
                    </li>
                    <li class="menu-item" data-section="notificacoes">
                        <i class="fas fa-bell"></i>
                        <span>Notificações</span>
                    </li>
                    <li class="menu-item" data-section="configuracoes">
                        <i class="fas fa-cog"></i>
                        <span>Configurações</span>
                    </li>
                    <li class="menu-item" data-section="academy">
                        <i class="fas fa-graduation-cap"></i>
                        <span>SIGPCAAcademy</span>
                    </li>
                </ul>
                
                <div class="sidebar-footer">
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i>
                        <span>Usuário</span>
                    </div>
                    <button class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Sair</span>
                    </button>
                </div>
            </nav>

            <!-- Conteúdo Principal -->
            <main class="main-content">
                <header class="top-header">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="header-title">
                        <h1 id="pageTitle">Dashboard</h1>
                    </div>
                    <div class="header-actions">
                        <button class="notification-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                        <button class="profile-btn">
                            <i class="fas fa-user"></i>
                        </button>
                    </div>
                </header>

                <div class="content-area">
                    <!-- Dashboard Section -->
                    <section id="dashboard" class="content-section active">
                        <div class="dashboard-grid">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-file-contract"></i>
                                    <h3>Contratos Ativos</h3>
                                </div>
                                <div class="card-content">
                                    <span class="number">24</span>
                                    <span class="label">Contratos</span>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-clock"></i>
                                    <h3>Em Andamento</h3>
                                </div>
                                <div class="card-content">
                                    <span class="number">8</span>
                                    <span class="label">Processos</span>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-check-circle"></i>
                                    <h3>Concluídos</h3>
                                </div>
                                <div class="card-content">
                                    <span class="number">156</span>
                                    <span class="label">Este Ano</span>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <h3>Pendentes</h3>
                                </div>
                                <div class="card-content">
                                    <span class="number">12</span>
                                    <span class="label">Ações</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-charts">
                            <div class="chart-card">
                                <h3>Atividade Recente</h3>
                                <div class="activity-list">
                                    <div class="activity-item">
                                        <i class="fas fa-plus text-success"></i>
                                        <div class="activity-content">
                                            <p>Novo contrato cadastrado</p>
                                            <small>Há 2 horas</small>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <i class="fas fa-edit text-warning"></i>
                                        <div class="activity-content">
                                            <p>Contrato atualizado</p>
                                            <small>Há 4 horas</small>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <i class="fas fa-check text-success"></i>
                                        <div class="activity-content">
                                            <p>Processo concluído</p>
                                            <small>Há 1 dia</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Cadastro Section -->
                    <section id="cadastro" class="content-section">
                        <div class="section-header">
                            <div class="search-bar">
                                <input type="text" id="itemSearchInput" placeholder="Pesquisar itens..." autocomplete="off">
                                <button class="filter-btn" id="itemFilterBtn" title="Filtros avançados (em breve)"><i class="fas fa-filter"></i></button>
                            </div>
                            <div class="action-buttons">
                                <button class="btn-secondary" id="importBtn">
                                    <i class="fas fa-file-import"></i>
                                    Importar
                                </button>
                                <button class="btn-primary">
                                    <i class="fas fa-plus"></i>
                                    Novo Item
                                </button>
                            </div>
                        </div>
                        <!-- Tabela de Itens Cadastrados -->
                        <div class="table-container" id="itensTableContainer">
                            <table class="itens-table">
                                <thead>
                                    <tr>
                                        <th>Nº Item</th>
                                        <th>Classificação</th>
                                        <th>Descrição</th>
                                        <th>Unidade</th>
                                        <th>Quantitativo</th>
                                        <th>Valor Unitário</th>
                                        <th>Valor Total</th>
                                        <th>Fonte de Recurso</th>
                                        <th>Programa</th>
                                        <th>Prioridade</th>
                                        <th>Forma da Contratação</th>
                                        <th>Início</th>
                                        <th>Fim</th>
                                        <th>Justificativa</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="itensTableBody">
                                    <tr class="no-items-row"><td colspan="15" style="text-align:center;color:#aaa;">Nenhum item cadastrado</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                    <!-- Notificações Section -->
                    <section id="notificacoes" class="content-section">
                        <div class="section-header">
                            <h2>Notificações</h2>
                            <button class="btn-secondary">
                                <i class="fas fa-check-double"></i>
                                Marcar como Lidas
                            </button>
                        </div>
                        <div class="placeholder-content">
                            <i class="fas fa-bell"></i>
                            <h3>Central de Notificações</h3>
                            <p>Suas notificações aparecerão aqui.</p>
                        </div>
                    </section>

                    <!-- Configurações Section -->
                    <section id="configuracoes" class="content-section">
                        <div class="config-options">
                            <div class="config-card" id="perfilSegurancaBtn">
                                <i class="fas fa-user-shield"></i>
                                <span>Perfil e Segurança</span>
                            </div>
                            <div class="config-card">
                                <i class="fas fa-sliders-h"></i>
                                <span>Ajustes e Sistema</span>
                            </div>
                            <div class="config-card">
                                <i class="fas fa-network-wired"></i>
                                <span>Rede e Logs</span>
                            </div>
                        </div>

                        <!-- Modal Perfil e Segurança -->
                        <div class="modal-overlay" id="perfilModalOverlay">
                            <div class="modal perfil-modal" id="perfilModal">
                                <div class="modal-header">
                                    <h2>Perfil e Segurança</h2>
                                    <button class="close-modal" id="closePerfilModal" title="Fechar">&times;</button>
                                </div>
                                <form id="perfilForm">
                                    <div class="perfil-info-row">
                                        <div class="form-group">
                                            <label for="perfilTelefone">Telefone</label>
                                            <input type="text" id="perfilTelefone" name="perfilTelefone" placeholder="(00) 00000-0000">
                                        </div>
                                        <div class="form-group">
                                            <label for="perfilEmail">Email</label>
                                            <input type="email" id="perfilEmail" name="perfilEmail" placeholder="email@exemplo.com">
                                        </div>
                                    </div>
                                    <div class="perfil-info-row">
                                        <div class="form-group">
                                            <label for="perfilId">ID</label>
                                            <input type="text" id="perfilId" name="perfilId" value="" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label for="perfilSecretaria">Secretaria</label>
                                            <input type="text" id="perfilSecretaria" name="perfilSecretaria" value="" readonly>
                                        </div>
                                    </div>
                                    <div class="perfil-info-row">
                                        <div class="form-group full-width">
                                            <label for="perfilSenha">Alterar Senha</label>
                                            <input type="password" id="perfilSenha" name="perfilSenha" placeholder="Nova senha">
                                        </div>
                                    </div>
                                    <div class="modal-actions">
                                        <button type="submit" class="btn-primary">Salvar</button>
                                        <button type="button" class="btn-secondary" id="cancelPerfilModal">Cancelar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </section>

                    <!-- Academy Section -->
                    <section id="academy" class="content-section">
                        <div class="section-header">
                            <h2>SIGPCAAcademy</h2>
                        </div>
                        <div class="placeholder-content">
                            <i class="fas fa-graduation-cap"></i>
                            <h3>Portal de Treinamento</h3>
                            <p>Acesse cursos e materiais de treinamento.</p>
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal de Cadastro de Item -->
    <div class="modal-overlay" id="itemModalOverlay">
        <div class="modal" id="itemModal">
            <div class="modal-header">
                <h2>Cadastro de Item</h2>
                <button class="close-modal" id="closeItemModal" title="Fechar">&times;</button>
            </div>
            <form id="itemForm">
                <!-- Dados Básicos do Item -->
                <fieldset class="modal-fieldset">
                    <legend>Dados Básicos do Item</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemNumber">Número do item:</label>
                            <input type="text" id="itemNumber" name="itemNumber">
                        </div>
                        <div class="form-group">
                            <label for="itemClass">Classificação:</label>
                            <div class="input-group">
                                <input type="text" id="itemClass" name="itemClass">
                                <button type="button" class="add-btn" title="Adicionar Classificação">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemDesc">Descrição:</label>
                            <textarea id="itemDesc" name="itemDesc" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemUnit">Unidade:</label>
                            <select id="itemUnit" name="itemUnit">
                                <option value="">Selecione</option>
                                <option value="un">Unidade</option>
                                <option value="kg">Kg</option>
                                <option value="lt">Litro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="itemQty">Quantitativo:</label>
                            <input type="number" id="itemQty" name="itemQty" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="itemUnitValue">Valor Unitário:</label>
                            <input type="number" id="itemUnitValue" name="itemUnitValue" min="0" step="0.01" value="0.00">
                        </div>
                        <div class="form-group">
                            <label for="itemTotalValue">Valor Total:</label>
                            <input type="text" id="itemTotalValue" name="itemTotalValue" value="R$ 0,00" readonly>
                        </div>
                    </div>
                </fieldset>

                <!-- Informações Complementares -->
                <fieldset class="modal-fieldset">
                    <legend>Informações Complementares</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemFonte">Fonte de Recurso:</label>
                            <div class="input-group">
                                <input type="text" id="itemFonte" name="itemFonte">
                                <button type="button" class="add-btn" title="Adicionar Fonte">+</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="itemPrograma">Programa:</label>
                            <div class="input-group">
                                <input type="text" id="itemPrograma" name="itemPrograma">
                                <button type="button" class="add-btn" title="Adicionar Programa">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemPrioridade">Prioridade:</label>
                            <select id="itemPrioridade" name="itemPrioridade">
                                <option value="">Selecione</option>
                                <option value="baixa">Baixa</option>
                                <option value="media">Média</option>
                                <option value="alta">Alta</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="itemForma">Forma da Contratação:</label>
                            <select id="itemForma" name="itemForma">
                                <option value="">Selecione</option>
                                <option value="pregao">Pregão</option>
                                <option value="dispensa">Dispensa</option>
                                <option value="inexigibilidade">Inexigibilidade</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="itemInicio">Início da contratação:</label>
                            <input type="date" id="itemInicio" name="itemInicio">
                        </div>
                        <div class="form-group">
                            <label for="itemFim">Fim da contratação:</label>
                            <input type="date" id="itemFim" name="itemFim">
                        </div>
                    </div>
                </fieldset>

                <!-- Justificativa da Aquisição -->
                <fieldset class="modal-fieldset">
                    <legend>Justificativa da Aquisição</legend>
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemJustificativa">Justificativa:</label>
                            <textarea id="itemJustificativa" name="itemJustificativa" rows="2"></textarea>
                        </div>
                    </div>
                </fieldset>

                <div class="modal-actions">
                    <button type="submit" class="btn-primary">Salvar</button>
                    <button type="button" class="btn-secondary" id="cancelItemModal">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="home.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
